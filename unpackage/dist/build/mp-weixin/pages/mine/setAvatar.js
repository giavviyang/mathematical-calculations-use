(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/setAvatar"],{"2a20":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.userInfo.studentPortrait?(new Date).getTime():null);t._isMounted||(t.e0=function(e){t.isShowActions=!0},t.e1=function(e){e.stopPropagation(),t.isShowActions=!1}),t.$mp.data=Object.assign({},{$root:{g0:n}})},r=[]},"2b6e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("a34a")),o=i(n("4461")),r=i(n("0269"));function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,a,o,r,i){try{var u=t[r](i),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(a,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){u(r,a,o,i,s,"next",t)}function s(t){u(r,a,o,i,s,"throw",t)}i(void 0)}))}}var c=function(){n.e("component/restmodal").then(function(){return resolve(n("c9d2"))}.bind(null,n)).catch(n.oe)},f={components:{RestModal:c},data:function(){return{statusBarHeight:o.default.globalData.statusBarHeight,userInfo:{},avatarFrameList:[],isShowActions:!1,frameUsed:{},frameTemp:{}}},onLoad:function(){console.log(r.default),this.getUserInfo(),this.getMyAvatarFrame(),this.getUsed()},destroyed:function(){this.$refs.rest.hideHandle()},methods:{saveFrame:function(){var e=this;return s(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.frameTemp.image){n.next=3;break}return t.showToast({title:"请选择头像框",icon:"none",duration:1500}),n.abrupt("return",!1);case 3:return n.next=5,e.$http.post("/applet/modifyPortraitFrame",{id:e.frameTemp.id});case 5:o=n.sent,t.showToast({title:o.msg,icon:"none",duration:1500}),console.log(o);case 8:case"end":return n.stop()}}),n)})))()},setAvatar:function(t){console.log(t),this.frameTemp=t},getUsed:function(){var t=this;return s(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/applet/portraitBoxInUse",{});case 2:n=e.sent,console.log("正在使用的头像框：",n),t.frameUsed=n.data;case 5:case"end":return e.stop()}}),e)})))()},chooseImg:function(e){var n=this;1==e?t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera "],success:function(t){console.log(JSON.stringify(t.tempFilePaths)),n.upLoadAvatar(t.tempFilePaths[0])}}):2==e&&t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(t){console.log(JSON.stringify(t.tempFilePaths)),n.upLoadAvatar(t.tempFilePaths[0])}})},upLoadAvatar:function(e){var n=this,a=t.getStorageSync("token"),o=t.getStorageSync("cookie");t.uploadFile({url:r.default.baseUrl+"/applet/modifyPortrait",filePath:e,header:{Authorization:a,Cookie:o,"content-type":"application/x-www-form-urlencoded"},name:"file",success:function(e){console.log(e.data,1111),t.showToast({title:JSON.parse(e.data).msg,icon:"none",duration:1500}),n.userInfo={},n.getUserInfo(),n.isShowActions=!1}})},jumpHandle:function(e){t.navigateTo({url:e})},getMyAvatarFrame:function(){var t=this;return s(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/applet/queryMyAvatarFrame",{});case 2:n=e.sent,console.log("我的头像框列表：",n),t.avatarFrameList=n.data;case 5:case"end":return e.stop()}}),e)})))()},getUserInfo:function(){var t=this;return s(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/applet/getStudentsInfo",{});case 2:n=e.sent,console.log(n.data),t.userInfo=n.data;case 5:case"end":return e.stop()}}),e)})))()},navigateBack:function(){t.navigateBack()}}};e.default=f}).call(this,n("543d")["default"])},3182:function(t,e,n){"use strict";var a=n("f765"),o=n.n(a);o.a},"37c4":function(t,e,n){"use strict";n.r(e);var a=n("ec30"),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},4461:function(t,e,n){"use strict";n.r(e);var a=n("37c4");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("f91c");var r,i,u,s,c=n("f0c5"),f=Object(c["a"])(a["default"],r,i,!1,null,null,null,!1,u,s);e["default"]=f.exports},"921d":function(t,e,n){"use strict";n.r(e);var a=n("2b6e"),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},db70:function(t,e,n){"use strict";(function(t){n("ce6b");a(n("66fd"));var e=a(n("ed07"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},ec30:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,a,o,r,i){try{var u=t[r](i),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(a,o)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function u(t){r(i,a,o,u,s,"next",t)}function s(t){r(i,a,o,u,s,"throw",t)}u(void 0)}))}}var u={globalData:{statusBarHeight:"",isIPhoneX:!1,timer:null,minutes:0},onLaunch:function(){var e=i(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("App Launch"),n=this,t.getSystemInfo({success:function(t){n.globalData.statusBarHeight=t.statusBarHeight,-1==t.model.indexOf("iPhone X")&&-1==t.model.indexOf("iPhone XR")&&-1==t.model.indexOf("iPhone XS Max")||(n.globalData.isIPhoneX=!0)}}),this.globalData.timer=setInterval((function(){n.globalData.minutes=n.globalData.minutes+1}),1e3),t.setInnerAudioOption({mixWithOther:!0,obeyMuteSwitch:!1});case 5:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide"),clearInterval(this.globalData.timer)}};e.default=u}).call(this,n("543d")["default"])},ed07:function(t,e,n){"use strict";n.r(e);var a=n("2a20"),o=n("921d");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("3182");var i,u=n("f0c5"),s=Object(u["a"])(o["default"],a["b"],a["c"],!1,null,"47af6463",null,!1,a["a"],i);e["default"]=s.exports},f765:function(t,e,n){},f91c:function(t,e,n){"use strict";var a=n("fd7f"),o=n.n(a);o.a},fd7f:function(t,e,n){}},[["db70","common/runtime","common/vendor"]]]);